{% extends 'base.html' %}



{% block title %}
{{ name_items }}  
{% endblock %}

<!-- connect css file for this html -->
{% block link %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'reviews_items.css'%}">
{% endblock %}






{% block body %}

<h1>NAVBAR</h1>





<div class="block">
    <div class="information-item-block">
        <h1>{{ name_items }}</h1>
        <hr>

        {% for x in items_info %}   
            <h1>{{ x.price }} ₴</h1>
            <hr>
            <h1>{{ x.description_items }}</h1>
        {% endfor %}  



        <hr>
        <h1>Залишите відгук</h1>

    

        {% for x in items_info %}   
        
            <form action="/items/{{ x.id }}/{{ x.name_items }}/reviews" method="POST">
                {% csrf_token %}
                <!-- Get id this item -->
                <input type="hidden" name="id_item_review" value="{{ x.id }}">
                

                <h4>Ведіть  опис відгука</h4>
                <input type="text" name="text_review" placeholder="Введіть як вам товар" required/>

                <h4>Ведіть переваги товару</h4>
                <input type="text" name="advantages_item" placeholder="Введіть переваги товару..." required/>
                <h4>Ведіть недоліки товару</h4>
                <br>
                <input type="text" name="disadvantages_item" placeholder="Введіть недоліки товару..." required/>
                <br>
                <br>
                <button type="submit">Добавити</button>
            </form>
            
            <!-- Expect error -->
            {% for msg in messages %}
            <h1>Щоб залишити відгук, треба увійти в акаунт</h1> 
            {% endfor %}
            

        {% endfor %}  




    </div>


<br>
<br>
<br>
<br>
<br>
<br>

<style>

    /* Стилі для модального вікна */
    .modal {
        display: none; /* Початково ховаємо вікно */
        position: fixed; /* Фіксована позиція */
        z-index: 1; /* Встановлюємо високий показник зверху */
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto; /* Дозволяє прокручувати вміст вікна */
        background-color: rgba(0,0,0,0.4); /* Темне фонове покриття */
    }
    
  .modal-content {
    background-color: #fefefe;
    margin: 15% auto; /* Відступ від верху */
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
  }
  
  /* Стилі для кнопки */
  button {
    background-color: #4CAF50; /* Зелений колір кнопки */
    border: none;
    color: white;
    padding: 10px 20px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: 4px 2px;
    cursor: pointer;
  }
  

</style>




<!-- My review -->
{% for my_review in show_my_review %}

    <div class="block-my-review">
        <h1 style="text-align: center;">Ваш відгук</h1>

        <button onclick="openModal()">Редагувати відгук</button>
          
        <script>
              function openModal() {
                  document.getElementById("modalEditReview").style.display = "block";
                }
                
                function closeModal() {
                  document.getElementById("modalEditReview").style.display = "none";
                }              
        </script>
        

        {% for i in items_info %}  
            <!-- EDIT FIELD FOR REVIEW -->
            <div id="modalEditReview" class="modal">
                <div class="modal-content">
                <span class="close" onclick="closeModal()">&times;</span>
                {% for x in show_my_review %}   
            
                    <form action="/items/{{ i.id }}/{{ i.name_items }}/reviews" method="POST">
                        {% csrf_token %}
                        <!-- Get id this item -->
                        <input type="hidden" name="id_item_review_edit" value="{{ x.id }}">
                        
        
                        <h4>Ведіть  опис відгука</h4>
                        <input type="text" name="text_review_edit" value="{{ x.text_review }}" placeholder="Введіть як вам товар" required/>
        
                        <h4>Ведіть переваги товару</h4>
                        <input type="text" name="advantages_item_edit" value="{{ x.advantages_item }}"  placeholder="Введіть переваги товару..." required/>
                        <h4>Ведіть недоліки товару</h4>
                        <br>
                        <input type="text" name="disadvantages_item_edit" value="{{ x.disadvantages_item }}" placeholder="Введіть недоліки товару..." required/>
                        <br>
                        <br>
                        <button type="submit">Готово</button>
                    </form>
                    

        
            {% endfor %}  
        {% endfor %}
  
            </div>
        </div>
        













        <!-- Delete - my review  -->
        <form method="POST">
            {% csrf_token %}
            <input type="hidden" name="delete_my_review" value="delete_review">
            <input  type="submit" style="float: right;" value="Delete review">
        </form>

        <br>
        <br>    


        <h2>{{ my_review.login_user_review }}</h2>
        <p>{{ my_review.date_reviews }}</p>
        <hr>
        <p>{{ my_review.text_review }}</p>
        <h3>Переваги</h3>

        <ul>
        <p>{{ my_review.advantages_item }}</p>
        </ul>

        <h3>Не доліки</h3>

        <ul>
        <p>{{ my_review.disadvantages_item }}</p>
        </ul>

    </div>


    
{% endfor %}




<!-- See reviews other users -->
{% for review in see_reviews_this_item %}
    {% if not show_my_review|length or review.id != show_my_review.0.id %}
        <div class="block-reviews">
            <h2>{{ review.login_user_review }}</h2>
            <p>{{ review.date_reviews }}</p>
            <hr>
            <p>{{ review.text_review }}</p>
            <h3>Переваги</h3>
    
            <ul>
              <p>{{ review.advantages_item }}</p>
            </ul>
    
            <h3>Не доліки</h3>
    
            <ul>
              <p>{{ review.disadvantages_item }}</p>
            </ul>

    


    
        </div>
    {% endif %}
{% endfor %}




{% endblock %}
